@model Nigeria_Reg.Models.SurveyViewE

@{
    ViewBag.Title = "Create SectionE";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create Survey/Section E</h2>

@if (ViewBag.Exception != null)
{
    <p style="color: Red">@ViewBag.Exception</p>
}

<script>
    $(function () {

        $("#forma").on("keyup change", "[class^=pline-]", function (e) {
            var trid = $(this).closest('tr').attr('id');
            if ($(this).val() != '') {
                $('.cb_' + trid).prop('checked', true);
            }
        });

        $('[class^=cb_]').click(function (e) {
            if (!$(this).is(':checked')) {
                var trid = $(this).closest('tr').attr('id');

                $('#' + trid).find('input[type=text], select').each(function () {
                    $(this).val('');
                });
                $('.cb_' + trid).prop('checked', false);

            }
        });

    });
</script>

<hr />
    <table class="table table-striped table-condensed table-hover">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.site.SSID)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.site.SiteName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.site.Type)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.survey.SurveyDate)
                </th>
            </tr>
        </thead>

        <tbody>
            <tr>
                <td>
                    @ViewBag.SSID
                </td>
                <td>
                    @ViewBag.SiteName
                </td>
                <td>
                    @ViewBag.SiteType
                </td>
                <td>
                    @ViewBag.s_date
                </td>
            </tr>
        </tbody>
    </table>

@using (Html.BeginForm("Create", "SectionE", FormMethod.Post, new { id = "forma" }))

{
    //@Html.AntiForgeryToken()

    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <fieldset>

        <br />
        <table class="table">
            <tr><th><div class="text-danger">E. PROTECTION</div></th></tr>
            <tr>
                <th colspan=4>
                    <div class="text-danger">
                        E.1a. Activities carried out during the week
                    </div>
                </th>
            </tr>

            <tr>
                <td>
                    Protection monitoring<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_ProtectionMonitoring)
                        @Html.ValidationMessageFor(m => m.e.b_ProtectionMonitoring)
                    </div>
                </td>
                <td>
                    Focus group discussion<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_FocusGroup_discuss)
                        @Html.ValidationMessageFor(m => m.e.b_FocusGroup_discuss)
                    </div>
                </td>
                <td>
                    Recreational activities for women<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_RecreationalActivities_wm)
                        @Html.ValidationMessageFor(m => m.e.b_RecreationalActivities_wm)
                    </div>
                </td>
                <td>
                    Recreational activities for children<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_RecreationalActivities_ch)
                        @Html.ValidationMessageFor(m => m.e.b_RecreationalActivities_ch)
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    Trainings for women<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_Trainings_wm)
                        @Html.ValidationMessageFor(m => m.e.b_Trainings_wm)
                    </div>
                </td>
                <td>
                    Trainings for children<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_Trainings_ch)
                        @Html.ValidationMessageFor(m => m.e.b_Trainings_ch)
                    </div>
                </td>
                <td>
                    Other activity carried<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.e.b_other_activity)
                        @Html.ValidationMessageFor(m => m.e.b_other_activity)
                    </div>
                </td>
                <td>
                    If other specify:<div class="display-field">
                        @Html.TextBoxFor(m => m.e.other_activity_spec)
                        @Html.ValidationMessageFor(m => m.e.other_activity_spec)
                    </div>

                </td>
            </tr>


            <tr><th colspan="2"><div class="text-danger">E.1b. Gaps identified on site</div></th></tr>

            <tr>
                <td>Adequate security available on site?</td>
                <td>
                    <div class="display-radio">
                        @Html.RadioButtonFor(m => m.e.SecurityOnSite, 1, false) Yes
                        @Html.RadioButtonFor(m => m.e.SecurityOnSite, 2, false) No
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2">IDPs relationship with the security</td>
                <td>
                    <div class="display-radio">
                        @Html.RadioButtonFor(m => m.e.IDP_relTo_Sec, 1, false) Excellent
                        @Html.RadioButtonFor(m => m.e.IDP_relTo_Sec, 2, false) Very Good
                        @Html.RadioButtonFor(m => m.e.IDP_relTo_Sec, 3, false) Good
                        @Html.RadioButtonFor(m => m.e.IDP_relTo_Sec, 4, false) Poor
                        @Html.RadioButtonFor(m => m.e.IDP_relTo_Sec, 5, false) Very Poor

                        @Html.ValidationMessageFor(m => m.e.IDP_relTo_Sec)
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2">Security incidents reported on site?</td>
                <td>
                    <div class="display-radio">
                        @Html.RadioButtonFor(m => m.e.SecIncidents, 1, false) Yes
                        @Html.RadioButtonFor(m => m.e.SecIncidents, 2, false) No

                        @Html.ValidationMessageFor(m => m.e.SecIncidents)
                    </div>
                </td>
            </tr>
        </table>
        <table ="100%" class="table">
            <tr><th><div class="text-danger">E.1c. Unaccompanied/Separated Children</div></th></tr>
            <tr>
                <td>
                    <table width="60%">
                        <tr>
                            <td>#Child Abuse</td>
                            <td>#Child Labor</td>
                            <td>#Sexual Exploitation</td>
                            <td>#Psychosocial</td>
                            <td>#Forced Labor</td>
                            <td>#GBV</td>
                            <td>#General Violence</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_childAbuse)
                                    @Html.ValidationMessageFor(m => m.e.nb_childAbuse)
                                </div>
                            </td>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_childLabor)
                                    @Html.ValidationMessageFor(m => m.e.nb_childLabor)
                                </div>
                            </td>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_sexualExploitation)
                                    @Html.ValidationMessageFor(m => m.e.nb_sexualExploitation)
                                </div>
                            </td>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_psychosocial)
                                    @Html.ValidationMessageFor(m => m.e.nb_psychosocial)
                                </div>
                            </td>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_forcedLabor)
                                    @Html.ValidationMessageFor(m => m.e.nb_forcedLabor)
                                </div>
                            </td>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_GBV)
                                    @Html.ValidationMessageFor(m => m.e.nb_GBV)
                                </div>
                            </td>
                            <td>
                                <div class="col-md-10 txtresize">
                                    @Html.TextBoxFor(m => m.e.nb_generalViolence)
                                    @Html.ValidationMessageFor(m => m.e.nb_generalViolence)
                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <table ="100%" class="table">
            <tr><th><div class="text-danger">E.1c. Unaccompanied/Separated Children</div></th></tr>
            <tr>
                <td>

                    <table width="100%" class="table">
                        <tr>

                            <th colspan="2">Unaccompanied</th>

                            <th colspan="2">Separated</th>

                            <th colspan="2">Unaccompanied in Foster</th>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <table ="100%" class="table">
                                    <tr>
                                        <td>Male</td>
                                        <td>Female</td>
                                    </tr>
                                </table>
                            </td>

                            <td colspan="2">
                                <table ="100%" class="table">
                                    <tr>
                                        <td>Male</td>
                                        <td>Female</td>
                                    </tr>
                                </table>
                            </td>

                            <td colspan="2">
                                <table ="100%" class="table">
                                    <tr>
                                        <td>Male</td>
                                        <td>Female</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <table ="100%" class="table">
                                    <tr>
                                        <td>
                                            <div class="col-md-10 txtresize">
                                                @Html.TextBoxFor(m => m.e.UAC_m)
                                                @Html.ValidationMessageFor(m => m.e.UAC_m)
                                            </div>
                                        </td>

                                        <td>
                                            <div class="col-md-10 txtresize">
                                                @Html.TextBoxFor(m => m.e.UAC_f)
                                                @Html.ValidationMessageFor(m => m.e.UAC_f)
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td colspan="2">
                                <table ="100%" class="table">
                                    <tr>
                                        <td>
                                            <div class="col-md-10 txtresize">
                                                @Html.TextBoxFor(m => m.e.SP_ch_m)
                                                @Html.ValidationMessageFor(m => m.e.SP_ch_m)
                                            </div>
                                        </td>

                                        <td>
                                            <div class="col-md-10 txtresize">
                                                @Html.TextBoxFor(m => m.e.SP_ch_f)
                                                @Html.ValidationMessageFor(m => m.e.SP_ch_f)
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td colspan="2">
                                <table ="100%" class="table">
                                    <tr>
                                        <td>
                                            <div class="col-md-10 txtresize">
                                                @Html.TextBoxFor(m => m.e.UAC_foster_m)
                                                @Html.ValidationMessageFor(m => m.e.UAC_foster_m)
                                            </div>
                                        </td>

                                        <td>
                                            <div class="col-md-10 txtresize">
                                                @Html.TextBoxFor(m => m.e.UAC_foster_f)
                                                @Html.ValidationMessageFor(m => m.e.UAC_foster_f)
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>

                        </tr>

                    </table>
                </td>
            </tr>
            @*</table>
            <table="100%">*@
                        <tr><th><div class="text-danger">Protection cases referred</div></th></tr>
                        <tr>
                            <td>
                                Child Abuse cases<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_ChildAbuse)
                                    @Html.ValidationMessageFor(m => m.e.b_ChildAbuse)
                                </div>
                            </td>
                            <td>
                                Child labor<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_ChildLabor)
                                    @Html.ValidationMessageFor(m => m.e.b_ChildLabor)
                                </div>
                            </td>
                            <td>
                                Sexual Exploitation<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_SexualExploitation)
                                    @Html.ValidationMessageFor(m => m.e.b_SexualExploitation)
                                </div>
                            </td>
                            <td>
                                Psychosocial<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_Psychosocial)
                                    @Html.ValidationMessageFor(m => m.e.b_Psychosocial)
                                </div>
                            </td>
                            <td>
                                Forced labor<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_ForcedLabor)
                                    @Html.ValidationMessageFor(m => m.e.b_ForcedLabor)
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Gender Based-Violence (GBV)<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_GBV)
                                    @Html.ValidationMessageFor(m => m.e.b_GBV)
                                </div>
                            </td>
                            <td>
                                General Violence<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_GeneralViolence)
                                    @Html.ValidationMessageFor(m => m.e.b_GeneralViolence)
                                </div>
                            </td>
                            <td>
                                Unaccompanied Children<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_UAC)
                                    @Html.ValidationMessageFor(m => m.e.b_UAC)
                                </div>
                            </td>
                            <td>
                                Separated Children<div class="col-md-10">
                                    @Html.CheckBoxFor(m => m.e.b_SP_ch)
                                    @Html.ValidationMessageFor(m => m.e.b_SP_ch)
                                </div>
                            </td>
                        </tr>


                        <tr><th colspan="1"><div class="text-danger">How prevalent is sexual abuse</div></th></tr>

                        <tr>
                            <td colspan="1">
                                <div class="display-radio">
                                    @Html.RadioButtonFor(m => m.e.SexualAbuse_prev, 1, false) Very prevalent
                                    @Html.RadioButtonFor(m => m.e.SexualAbuse_prev, 2, false) Fairly prevalent
                                    @Html.RadioButtonFor(m => m.e.SexualAbuse_prev, 3, false) None

                                    @Html.ValidationMessageFor(m => m.e.SexualAbuse_prev)
                                </div>
                            </td>
                        </tr>
                        <tr><th colspan="2"><div class="text-danger">Age range of those who suffer abuse</div></th></tr>

                        <tr>
                            <td>
                                <div class="display-radio">
                                    @Html.RadioButtonFor(m => m.e.Abused_ppl_AgeRange, 1, false) 16 - 18
                                    @Html.RadioButtonFor(m => m.e.Abused_ppl_AgeRange, 2, false) 20 - 25
                                    @Html.RadioButtonFor(m => m.e.Abused_ppl_AgeRange, 3, false) Other ages

                                    @Html.ValidationMessageFor(m => m.e.Abused_ppl_AgeRange)
                                </div>
                            </td>
                            <td>
                                If other ages specify:<div class="display-field">
                                    @Html.TextBoxFor(m => m.e.Other_AgeRange)
                                    @Html.ValidationMessageFor(m => m.e.Other_AgeRange)
                                </div>

                            </td>

                        </tr>
                        <tr><th colspan="2"><div class="text-danger">How frequent are GBV cases ?</div></th></tr>
                        <tr><td>
                                <div class="display-radio">
                                    @Html.RadioButtonFor(m => m.e.GBV_cases_freq, 1, false) Frequent
                                    @Html.RadioButtonFor(m => m.e.GBV_cases_freq, 2, false) Fairly regular
                                    @Html.RadioButtonFor(m => m.e.GBV_cases_freq, 3, false) Infrequent

                                    @Html.ValidationMessageFor(m => m.e.GBV_cases_freq)
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <th colspan="1">
                                <div class="text-danger">
                                    E.2. Comments
                                </div>
                            </th>
                        </tr>
                        <tr>
                            <td>
                                <div class="editor-field">
                                    @Html.TextAreaFor(m => m.e.Comments, new { cols = 200, @rows = 6 })
                                    @Html.ValidationMessageFor(m => m.e.Comments)
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <th colspan="1">
                                <div class="text-danger">
                                    E.3. Services rendered during the week in review)
                                </div>
                            </th>
                        </tr>
                        <tr>
                            <td colspan="8">

                                <table width="100%" class="table">
                                    <tr>
                                        <th></th>
                                        <th>S/N</th>
                                        <th>Sub-Category</th>
                                        <th>Description</th>
                                        <th>QTTY</th>
                                        <th>Latitude</th>
                                        <th>Longitude</th>
                                        <th>Provided by?</th>
                                        <th>Remark</th>
                                    </tr>

                                    @for (int i = 0; i < Model.srv.Count(); i++)
                                    {
                                        int j = i+1;
                                        //j = j + 1;
                                        <tr id='@i'>

                                            <td>
                                                @Html.HiddenFor(model => model.srv[i].SurveyID)
                                                <div class="col-md-10">
                                                    @Html.CheckBoxFor(model => model.srv[i].notEmpty, new { @class = "cb_" + @i })
                                                </div>
                                            </td>
                                            <td>
                                                @Html.HiddenFor(model => model.srv[i].SN)
                                                @j
                                            </td>
                                            <td>
                                                <div class="col-md-10">
                                                    @Html.DropDownListFor(model => model.srv[i].SubCat, new SelectList((SelectList)ViewBag.Prot_SubCat, "Value", "Text", Model.srv[i].SubCat), "[Select]", new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].SubCat)
                                                </div>
                                            </td>
                                            <td>
                                                <div class="col-md-10">
                                                    @Html.TextBoxFor(model => model.srv[i].Description, new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].Description)
                                                </div>
                                            </td>
                                            <td>
                                                <div class="col-md-10 txtresize">
                                                    @Html.TextBoxFor(model => model.srv[i].QTTY, new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].QTTY)
                                                </div>
                                            </td>
                                            <td>
                                                <div class="col-md-10">
                                                    @Html.TextBoxFor(model => model.srv[i].Lat, new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].Lat)
                                                </div>
                                            </td>
                                            <td>
                                                <div class="col-md-10">
                                                    @Html.TextBoxFor(model => model.srv[i].Lon, new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].Lon)
                                                </div>
                                            </td>
                                            <td>
                                                <div class="col-md-10">
                                                    @Html.DropDownListFor(model => model.srv[i].Provider, new SelectList((SelectList)ViewBag.Prov, "Value", "Text", Model.srv[i].Provider), "[Select]", new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].Provider)
                                                </div>
                                            </td>
                                            <td>
                                                <div class="col-md-10">
                                                    @Html.TextBoxFor(model => model.srv[i].Remark, new { @class = "pline-" + @i })
                                                    @Html.ValidationMessageFor(model => model.srv[i].Remark)
                                                </div>
                                            </td>


                                        </tr>
                                    }
                                </table>
                            </td>
                        </tr>

                    </table>

                    <br />
        <p>
            <input type="submit" value="Save" /> | @Html.ActionLink("Cancel", "Index", new { id = (int)ViewBag.s_id })
        </p>
</fieldset>
}

<br />
<div>
    @Html.ActionLink("Back to SectionD", "Index", "SectionD", new RouteValueDictionary(new { id = (int)ViewBag.s_id }), null)
</div>

