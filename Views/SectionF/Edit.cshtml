@model Nigeria_Reg.Models.SurveyViewF

@{
    ViewBag.Title = "Edit SectionF";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit Survey/Section F</h2>

@if (ViewBag.Exception != null)
{
    <p style="color: Red">@ViewBag.Exception</p>
}

@if (ViewBag.error != null)
{
    <p style="color: Red">@ViewBag.error</p>
}


<link href="~/Content/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/jquery-ui.js" type="text/javascript"></script>

<script>
    $(function () {

        $("#forma").on("keyup change", "[class^=pline-]", function (e) {
            var trid = $(this).closest('tr').attr('id');
            if ($(this).val() != '') {
                $('.cb_' + trid).prop('checked', true);
            }
        });

        $('[class^=cb_]').click(function (e) {
            if (!$(this).is(':checked')) {
                var trid = $(this).closest('tr').attr('id');

                $('#' + trid).find('input[type=text], select').each(function () {
                    $(this).val('');
                });
                $('.cb_' + trid).prop('checked', false);

            }
        });

    });
</script>

<hr />
<table class="table table-striped table-condensed table-hover">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.site.SSID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.site.SiteName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.site.Type)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.survey.SurveyDate)
            </th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td>
                @ViewBag.SSID
            </td>
            <td>
                @ViewBag.SiteName
            </td>
            <td>
                @ViewBag.SiteType
            </td>
            <td>
                @ViewBag.s_date
            </td>
        </tr>
    </tbody>
</table>

@using (Html.BeginForm("Edit", "SectionF", FormMethod.Post, new { id = "forma" }))

{

    //@Html.AntiForgeryToken()

    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <fieldset>

        <br />
        <table class="table">
            <tr><th colspan="5"><div class="text-danger">F. EDUCATION</div></th></tr>
            <tr>@Html.HiddenFor(m => m.f.SurveyID)
            @Html.HiddenFor(m => m.f.created_by)
            @Html.HiddenFor(m => m.f.create_time)
            <th colspan=5>
                <div class="text-danger">
                    F.1a. Activities carried out during the week
                </div>
            </th>
        </tr>

            <tr>
                <td>
                    Establishment of schools/learning spaces<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.f.b_SchoolEstablishment)
                        @Html.ValidationMessageFor(m => m.f.b_SchoolEstablishment)
                    </div>
                </td>
                <td>
                    Distribution of material<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.f.b_MaterialDistribution)
                        @Html.ValidationMessageFor(m => m.f.b_MaterialDistribution)
                    </div>
                </td>
                <td>
                    Training for teachers and education personel<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.f.b_TrainingForTeachers)
                        @Html.ValidationMessageFor(m => m.f.b_TrainingForTeachers)
                    </div>
                </td>
                <td>
                    Other activity carried<div class="col-md-10">
                        @Html.CheckBoxFor(m => m.f.b_Other)
                        @Html.ValidationMessageFor(m => m.f.b_Other)
                    </div>
                </td>
                <td>
                    If other specify:<div class="display-field">
                        @Html.TextBoxFor(m => m.f.Other_activity_spec)
                        @Html.ValidationMessageFor(m => m.f.Other_activity_spec)
                    </div>

                </td>
            </tr>


            <tr><th colspan="5"><div class="text-danger">F.1b. Gaps identified on site</div></th></tr>

            <tr>
                <td colspan="2">% of the children at the site that attended school</td>
                <td colspan="3">
                    <div class="display-radio">
                        @Html.RadioButtonFor(m => m.f.perc_ch_attend_sch, 1, false) None
                        @Html.RadioButtonFor(m => m.f.perc_ch_attend_sch, 2, false) < 25%
                        @Html.RadioButtonFor(m => m.f.perc_ch_attend_sch, 3, false) < 50%
                        @Html.RadioButtonFor(m => m.f.perc_ch_attend_sch, 4, false) < 75%
                        @Html.RadioButtonFor(m => m.f.perc_ch_attend_sch, 5, false) > 75%

                        @Html.ValidationMessageFor(m => m.f.perc_ch_attend_sch)
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2">% of instruction material provided</td>
                <td colspan="3">
                    <div class="display-radio">
                        @Html.RadioButtonFor(m => m.f.perc_avail_instruction_mat, 1, false) None
                        @Html.RadioButtonFor(m => m.f.perc_avail_instruction_mat, 2, false) < 25%
                        @Html.RadioButtonFor(m => m.f.perc_avail_instruction_mat, 3, false) < 50%
                        @Html.RadioButtonFor(m => m.f.perc_avail_instruction_mat, 4, false) < 75%
                        @Html.RadioButtonFor(m => m.f.perc_avail_instruction_mat, 5, false) > 75%

                        @Html.ValidationMessageFor(m => m.f.perc_avail_instruction_mat)
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2">% of Children at the site with access to educational facilities</td>
                <td colspan="3">
                    <div class="display-radio">
                        @Html.RadioButtonFor(m => m.f.perc_ch_access_edu_fac, 1, false) None
                        @Html.RadioButtonFor(m => m.f.perc_ch_access_edu_fac, 2, false) < 25%
                        @Html.RadioButtonFor(m => m.f.perc_ch_access_edu_fac, 3, false) < 50%
                        @Html.RadioButtonFor(m => m.f.perc_ch_access_edu_fac, 4, false) < 75%
                        @Html.RadioButtonFor(m => m.f.perc_ch_access_edu_fac, 5, false) > 75%

                        @Html.ValidationMessageFor(m => m.f.perc_ch_access_edu_fac)
                    </div>
                </td>
            </tr>

            <tr>
                <th colspan="5">
                    <div class="text-danger">
                        F.2. Comments
                    </div>
                </th>
            </tr>
            <tr>
                <td>
                    <div class="editor-field">
                        @Html.TextAreaFor(m => m.f.Comments, new { cols = 200, @rows = 6 })
                        @Html.ValidationMessageFor(m => m.f.Comments)
                    </div>
                </td>
            </tr>

            <tr>
                <th colspan="1">
                    <div class="text-danger">
                        F.3. Services and facilities donated (during the week in review)
                    </div>
                </th>
            </tr>
            <tr>
                <td colspan="8">

                    <table width="100%" class="table">
                        <tr>
                            <th></th>
                            <th>S/N</th>
                            <th>Description</th>
                            <th>QTTY</th>
                            <th>Latitude</th>
                            <th>Longitude</th>
                            <th>Provided by?</th>
                            <th>Remark</th>
                        </tr>

                        @for (int i = 0; i < Model.srv.Count(); i++)
                        {
                            int j = i+1;
                            //j = j + 1;
                            <tr id='@i'>

                                <td>
                                    @Html.HiddenFor(model => model.srv[i].SurveyID)
                                    <div class="col-md-10">
                                        @Html.CheckBoxFor(model => model.srv[i].notEmpty, new { @class = "cb_" + @i })
                                    </div>
                                </td>
                                <td>
                                    @Html.HiddenFor(model => model.srv[i].SN)
                                    @j
                                </td>
                                <td>
                                    <div class="col-md-10">
                                        @Html.DropDownListFor(model => model.srv[i].Description, new SelectList((SelectList)ViewBag.Edu_Desc, "Value", "Text", Model.srv[i].Description), "[Select]", new { @class = "pline-" + @i })
                                        @Html.ValidationMessageFor(model => model.srv[i].Description)
                                    </div>
                                </td>
                                <td>
                                    <div class="col-md-10 txtresize">
                                        @Html.TextBoxFor(model => model.srv[i].QTTY, new { @class = "pline-" + @i })
                                        @Html.ValidationMessageFor(model => model.srv[i].QTTY)
                                    </div>
                                </td>
                                <td>
                                    <div class="col-md-10">
                                        @Html.TextBoxFor(model => model.srv[i].Lat, new { @class = "pline-" + @i })
                                        @Html.ValidationMessageFor(model => model.srv[i].Lat)
                                    </div>
                                </td>
                                <td>
                                    <div class="col-md-10">
                                        @Html.TextBoxFor(model => model.srv[i].Lon, new { @class = "pline-" + @i })
                                        @Html.ValidationMessageFor(model => model.srv[i].Lon)
                                    </div>
                                </td>
                                <td>
                                    <div class="col-md-10">
                                        @Html.DropDownListFor(model => model.srv[i].Provider, new SelectList((SelectList)ViewBag.Prov, "Value", "Text", Model.srv[i].Provider), "[Select]", new { @class = "pline-" + @i })
                                        @Html.ValidationMessageFor(model => model.srv[i].Provider)
                                    </div>
                                </td>
                                <td>
                                    <div class="col-md-10">
                                        @Html.TextBoxFor(model => model.srv[i].Remark, new { @class = "pline-" + @i })
                                        @Html.ValidationMessageFor(model => model.srv[i].Remark)
                                    </div>
                                </td>


                            </tr>
                        }
                    </table>
                </td>
            </tr>

        </table>

        <br />

        <p>
            <input type="submit" value="Save" /> | @Html.ActionLink("Cancel", "Index", new { id = (int)ViewBag.s_id })
        </p>
    </fieldset>
}

<br />
<div>
    @Html.ActionLink("Back to SectionE", "Index", "SectionE", new RouteValueDictionary(new { id = (int)ViewBag.s_id }), null)
</div>

